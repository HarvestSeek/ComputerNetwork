<!-- Fix MathJax rendering on iOS Safari due to rendering long numbers as phone numbers. -->




<!doctype html>
<html lang="en" class="no-js">
  <head>
    
	
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
	<meta name="format-detection" content="telephone=no">

    
      
        <title>2.IP - Learning Notes of Computer Networking</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../css/katex.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-117404761-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#1-ip" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Learning Notes of Computer Networking" class="md-header-nav__button md-logo">
          
            <i class="md-icon">import_contacts</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Learning Notes of Computer Networking
            </span>
            <span class="md-header-nav__topic">
              
                2.IP
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Learning Notes of Computer Networking" class="md-nav__button md-logo">
      
        <i class="md-icon">import_contacts</i>
      
    </a>
    Learning Notes of Computer Networking
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Preface" class="md-nav__link">
      Preface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../color/" title="Color" class="md-nav__link">
      Color
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      I Computer Networks
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        I Computer Networks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../1-Fundamentals/1.1.md" title="1.analysis" class="md-nav__link">
      1.analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1-Fundamentals/1.2.md" title="2.asymptotic complexity" class="md-nav__link">
      2.asymptotic complexity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1-Fundamentals/1.3.md" title="3.solving recurrences" class="md-nav__link">
      3.solving recurrences
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      II Application Layer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        II Application Layer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-sort/2.1.md" title="1.Simple Sort" class="md-nav__link">
      1.Simple Sort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-sort/2.2.md" title="2.Mergesort" class="md-nav__link">
      2.Mergesort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-sort/2.3.md" title="3.Heap and Heapsort" class="md-nav__link">
      3.Heap and Heapsort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-sort/2.4.md" title="4.Quicksort" class="md-nav__link">
      4.Quicksort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-sort/2.5.md" title="5.Sorting in linear time" class="md-nav__link">
      5.Sorting in linear time
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2-sort/2.6.md" title="6.Median and order statictics" class="md-nav__link">
      6.Median and order statictics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      III Transport Layer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        III Transport Layer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../3-TransportLayer/3.1/" title="1.Introduction to Transport Layer" class="md-nav__link">
      1.Introduction to Transport Layer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3-TransportLayer/3.2/" title="2.Principles of Reliable Data Transfer" class="md-nav__link">
      2.Principles of Reliable Data Transfer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3-TransportLayer/3.3/" title="3.Connection-Oriented Transport： TCP" class="md-nav__link">
      3.Connection-Oriented Transport： TCP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3-TransportLayer/3.4/" title="4.TCP：Flow and Congestion Control" class="md-nav__link">
      4.TCP：Flow and Congestion Control
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      IV Network Layer
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        IV Network Layer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../4.1/" title="1.Network Service Model" class="md-nav__link">
      1.Network Service Model
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        2.IP
      </label>
    
    <a href="./" title="2.IP" class="md-nav__link md-nav__link--active">
      2.IP
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-ip" title="1. IP 数据报格式" class="md-nav__link">
    1. IP 数据报格式
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-ip-fragmentation" title="2. IP 数据报分片 (Fragmentation)" class="md-nav__link">
    2. IP 数据报分片 (Fragmentation)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" title="(1). 标识、标志、片偏移" class="md-nav__link">
    (1). 标识、标志、片偏移
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" title="(2). 分片过程" class="md-nav__link">
    (2). 分片过程
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-ipv4" title="3. IPv4 编址" class="md-nav__link">
    3. IPv4 编址
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" title="(1). 子网与接口" class="md-nav__link">
    (1). 子网与接口
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ip" title="(2). 有类 IP 地址" class="md-nav__link">
    (2). 有类 IP 地址
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-ip" title="(3). IP 子网划分" class="md-nav__link">
    (3). IP 子网划分
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-cidr" title="(4). CIDR" class="md-nav__link">
    (4). CIDR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-dhcp" title="(5). DHCP 协议" class="md-nav__link">
    (5). DHCP 协议
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-nat" title="(6). 网络地址转换 (NAT)" class="md-nav__link">
    (6). 网络地址转换 (NAT)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-icmp" title="(7). ICMP 协议" class="md-nav__link">
    (7). ICMP 协议
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-ipv6" title="4. IPv6 简介" class="md-nav__link">
    4. IPv6 简介
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-ipv6" title="(1). IPv6 数据报格式" class="md-nav__link">
    (1). IPv6 数据报格式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ipv6" title="(2). IPv6 地址表示" class="md-nav__link">
    (2). IPv6 地址表示
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-ipv4-ipv6" title="(3). IPv4 → IPv6" class="md-nav__link">
    (3). IPv4 → IPv6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3.Route Algorithm/4.3.md" title="None" class="md-nav__link">
      None
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-ip" title="1. IP 数据报格式" class="md-nav__link">
    1. IP 数据报格式
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-ip-fragmentation" title="2. IP 数据报分片 (Fragmentation)" class="md-nav__link">
    2. IP 数据报分片 (Fragmentation)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" title="(1). 标识、标志、片偏移" class="md-nav__link">
    (1). 标识、标志、片偏移
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" title="(2). 分片过程" class="md-nav__link">
    (2). 分片过程
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-ipv4" title="3. IPv4 编址" class="md-nav__link">
    3. IPv4 编址
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" title="(1). 子网与接口" class="md-nav__link">
    (1). 子网与接口
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ip" title="(2). 有类 IP 地址" class="md-nav__link">
    (2). 有类 IP 地址
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-ip" title="(3). IP 子网划分" class="md-nav__link">
    (3). IP 子网划分
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-cidr" title="(4). CIDR" class="md-nav__link">
    (4). CIDR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-dhcp" title="(5). DHCP 协议" class="md-nav__link">
    (5). DHCP 协议
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-nat" title="(6). 网络地址转换 (NAT)" class="md-nav__link">
    (6). 网络地址转换 (NAT)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-icmp" title="(7). ICMP 协议" class="md-nav__link">
    (7). ICMP 协议
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-ipv6" title="4. IPv6 简介" class="md-nav__link">
    4. IPv6 简介
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-ipv6" title="(1). IPv6 数据报格式" class="md-nav__link">
    (1). IPv6 数据报格式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-ipv6" title="(2). IPv6 地址表示" class="md-nav__link">
    (2). IPv6 地址表示
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-ipv4-ipv6" title="(3). IPv4 → IPv6" class="md-nav__link">
    (3). IPv4 → IPv6
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>2.IP</h1>
                
                <p><font face="思源黑体 CN">
<font face="Consolas"></font></p>
<h3 id="1-ip">1. <font face="Consolas">IP</font> 数据报格式</h3>
<div align=center><img src="https://github.com/HarvestSeek/ComputerNetwork/blob/gh-pages/img/4-NetworkLayer/4.2/IPdatagram.png?raw=true" height=250></div>

<p></br>
① 版本号 (<font face="Consolas">4 bit</font>)</br>
&emsp;数据报对应的 <font face="Consolas">IP</font> 协议版本，决定了如何解释数据报的剩下部分。</p>
<p>② 首部长度 (<font face="Consolas">4 bit</font>)</br>
&emsp;以 4 字节为单位。由于 <font face="Consolas">options</font> 字段，首部长度可变，故通过此字段确定数据实际开始的地方。一般来说，大多数 <font face="Consolas">IP</font> 数据报不包含选项，首部长度为 20 字节。</p>
<p>③ 服务类型 (<font face="Consolas">TOS, 8 bit</font>)</br>
&emsp;用于区分不同服务类型的数据报，服务类型可能是低时延、高吞吐量、可靠性等。</p>
<p>④ 数据报长度 (<font face="Consolas">16 bit</font>)</br>
&emsp;<font face="Consolas">IP</font> 数据报的总长度，单位为字节，理论最大长度为 65535，实际上很少大于 1500。该理论值大于最大以太网帧。</p>
<p>⑤ 标识 (<font face="Consolas">16 bit</font>)、标志 (<font face="Consolas">3 bit</font>)、片偏移 (<font face="Consolas">13 bit</font>)</br>
&emsp;与 <font face="Consolas">IP</font> 分片有关。具体见 第 2 部分。</p>
<p>⑥ 生存时间 (<font face="Consolas">TTL, 8 bit</font>)</br>
&emsp;数据报的寿命，指出了此数据报能够经过的路由器数的最大值。开始设置一个初值，每经过一个路由器的处理该字段值减一，减为零时路由器必须将其丢弃。</p>
<p>⑦ 上层协议 (<font face="Consolas">8 bit</font>)</br>
&emsp;指示了 <font face="Consolas">IP</font> 数据报应该交给哪个上层协议，通常只在到达目的地起到作用。例如，值为 6 表示 <font face="Consolas">TCP</font>，值为 17 表示 <font face="Consolas">UDP</font>。</p>
<p>⑧ 首部校验和 (<font face="Consolas">16 bit</font>)</br>
&emsp;同 <font face="Consolas">UDP</font> 一样，每两个字节当做一个数，采用反码算术运算求和。在传输的过程，每经过一个路由器就要校验一次。与 <font face="Consolas">TCP/UDP</font> 不同的是，只对首部进行校验；并且，<font face="Consolas">IP</font> 也并不一定与 <font face="Consolas">TCP/IP</font> 位于同一个协议栈，因此，在网络层做校验是有必要的。</p>
<p>⑦ 源 <font face="Consolas">IP</font>、目的 <font face="Consolas">IP</font> (<font face="Consolas">32 bit</font>)</br>
&emsp;源主机通常通过 <font face="Consolas">DNS</font> 查找确定目的 <font face="Consolas">IP</font> 地址。</p>
<p>⑧ 选项 (<font face="Consolas">0 ~ 40 bit</font>)</br>
&emsp;可以携带安全信息、源选路径等。这个字段使得在处理数据报前不能预先确认数据开始处，这个考虑对主机上的 <font face="Consolas">IP</font> 处理、高性能路由器很重要，因此，在 <font face="Consolas">IPv6</font> 中已删除此字段。</p>
<p>⑨ 填充</br>
&emsp;补齐，使头部长为 4 字节的倍数。</p>
<h3 id="2-ip-fragmentation">2. <font face="Consolas">IP</font> 数据报分片 (<font face="Consolas">Fragmentation</font>)</h3>
<h4 id="1">(1). 标识、标志、片偏移</h4>
<p>&emsp;一个链路层帧能承载的最大数据量为最大传输单元 (<font face="Consolas">MTU</font>)，对于不同类型的链路层协议，其值并不确定。当 <font face="Consolas">IP</font> 数据报大小大于出链路的有效载荷大小，且对应的标志位允许路由器进行分片，那么就会进行分片，这些片 (<font face="Consolas">fragment</font>) 在目的主机的运输层之前重新组装。分片过程利用了头部相关字段：</p>
<ul>
<li>标识 (<font face="Consolas">ID, 16 bit</font>)：和源 <font face="Consolas">IP</font>、目的 <font face="Consolas">IP</font>、上层协议字段一同唯一地标识一个分片</li>
<li>标志 (<font face="Consolas">3 bit</font>)：其中一个比特保留，另外两个比特分别为：<ul>
<li><font face="Consolas">DF</font> (<font face="Consolas">Don't Fragment</font>)：当 <font face="Consolas">DF</font> <font face="Consolas">=</font> <font face="Consolas">1</font>，禁止分片</li>
<li><font face="Consolas">MF</font> (<font face="Consolas">More Fragment</font>)：当 <font face="Consolas">MF</font> <font face="Consolas">=</font> <font face="Consolas">0</font>，代表这是最后一个分片</li>
</ul>
</li>
<li>片偏移 (<font face="Consolas">13 bit</font>)：以 8 字节为单位，指出了分片封装的原数据的相对偏移量(首字节)</li>
</ul>
<h4 id="2">(2). 分片过程</h4>
<p>&emsp;设原 <font face="Consolas">IP</font> 分组总长度为 $L$ <font face="Consolas">byte</font>，待转发链路的 <font face="Consolas">MTU</font> 大小为 $M$ <font face="Consolas">byte</font>。当 $L&gt;M$ 且 <font face="Consolas">DF</font> <font face="Consolas">=</font> <font face="Consolas">1</font>，需要分片。</br></p>
<ul>
<li>一个最大分片可以封装的数据大小：$d=\lfloor \frac{(M-20)}{8}\rfloor × 8$</br></li>
<li>在最大分组条件下需要的总片数：$n=\lceil (L-20)/d \rceil$</br></li>
<li>每片的片偏移量为：$F_i=\frac{d}{8}×(i-1),\ 1\leq i \leq n$</br></li>
<li>前 $n-1$ 片的总长度为 $d+20$，最后一片的长度为 $L-(n-1)\cdot d$。</li>
</ul>
<h3 id="3-ipv4">3. <font face="Consolas">IPv4</font> 编址</h3>
<h4 id="1_1">(1). 子网与接口</h4>
<p>&emsp;网络层设备（主机、路由器）与物理链路之间的边界叫做接口 (<font face="Consolas">interface</font>)，路由器通常有多个接口，现代的主机也可以有一个以上的接口（多数情况下，主机只有一条链路接入网络）。<font face="Consolas">IP</font> 要求每个接口都有自己的 <font face="Consolas">IP</font> 地址，其长度为 32 <font face="Consolas">bit</font>，由于二进制数难于记忆，因此通常用点分十进制记法 (<font face="Consolas">dotted-decimal notation</font>) 表示。</br>
&emsp;每个以主机和路由器（网络层设备）的接口为端点划分出的区域 (<font face="Consolas">"islands of network"</font>) 叫做子网 (<font face="Consolas">subnet</font>)。<font face="Consolas">IP</font> 编址依照这一点，将 <font face="Consolas">IP</font> 地址分为网络号 (<font face="Consolas">NetID</font>) 和主机号 (<font face="Consolas">HostID</font>) 两部分。</p>
<h4 id="2-ip">(2). 有类 <font face="Consolas">IP</font> 地址</h4>
<p>&emsp;在 <font face="Consolas">CIDR</font> 被采用之前，<font face="Consolas">IP</font> 使用分类编址 (<font face="Consolas">classful addressing</font>)，通过二分法做如下划分：</p>
<ul>
<li><font face="Consolas">A</font> 类地址：首位为 0，占用地址空间的 50%，<font face="Consolas">NetID(8)-HostID(24)</font>，<font face="Consolas">0.0.0.0</font> ~ <font face="Consolas">127.255.255.255</font>。</li>
<li><font face="Consolas">B</font> 类地址：前两位为 10，占 25%，<font face="Consolas">NetID(16)-HostID(16)</font>，<font face="Consolas">128.0.0.0</font> ~ <font face="Consolas">191.255.255.255</font>。</li>
<li><font face="Consolas">C</font> 类地址：前三位为 110，占 12.5%，<font face="Consolas">NetID(24)-HostID(8)</font>，<font face="Consolas">192.0.0.0</font> ~ <font face="Consolas">223.255.255.255</font>。</li>
<li><font face="Consolas">D</font> 类地址：前四位 1110，占 6.25%，不区分网络号和主机号，<font face="Consolas">224.0.0.0</font> ~ <font face="Consolas">239.255.255.255</font>。也被称作多播地址，用于标识互联网中一组主机，只能作目的 <font face="Consolas">IP</font>。</li>
<li><font face="Consolas">E</font> 类地址：前四位 1111，占 6.25%，不区分网络号和主机号，<font face="Consolas">240.0.0.0</font> ~ <font face="Consolas">255.255.255.255</font>。</li>
</ul>
<p>&emsp;<font face="Consolas">A、B、C</font> 类地址可以用于标识子网，但其中并不是每个地址都可以用于标识主机。</p>
<details class="info"><summary>不能标识接口的特殊地址</summary><table>
<thead>
<tr>
<th align="center"><font face="Consolas">NetID</font></th>
<th align="center"><font face="Consolas">HostID</font></th>
<th align="center">作为源 <font face="Consolas">IP</font></th>
<th align="center">作为目的 <font face="Consolas">IP</font></th>
<th align="center">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">全0</td>
<td align="center">全0</td>
<td align="center">可以</td>
<td align="center">不可以</td>
<td align="center">在本网范围内表示本机；在路由表中用于表示默认路由</td>
</tr>
<tr>
<td align="center">全0</td>
<td align="center">特定值</td>
<td align="center">不可以</td>
<td align="center">可以</td>
<td align="center">用于表示本网内某个特定主机</td>
</tr>
<tr>
<td align="center">全1</td>
<td align="center">全1</td>
<td align="center">不可以</td>
<td align="center">可以</td>
<td align="center">本网广播地址</td>
</tr>
<tr>
<td align="center">特定值</td>
<td align="center">全0</td>
<td align="center">不可以</td>
<td align="center">不可以</td>
<td align="center">网络的地址，表示一个网络</td>
</tr>
<tr>
<td align="center">特定值</td>
<td align="center">全1</td>
<td align="center">不可以</td>
<td align="center">可以</td>
<td align="center">直接广播地址，对特定网络（另外一个网络）上所有主机进行广播</td>
</tr>
<tr>
<td align="center">127</td>
<td align="center">非全0或非全1的任何数</td>
<td align="center">可以</td>
<td align="center">可以</td>
<td align="center">环回地址，用于本地软件环回测试</td>
</tr>
</tbody>
</table>
</details>
<p>&emsp;<font face="Consolas">A、B、C</font> 还保留了一部分私有地址，这些地址只能在每一个组织或子网内部使用，在公共互联网络中无法使用。</p>
<details class="info"><summary>Private IPs</summary><table>
<thead>
<tr>
<th align="center"><font face="Consolas">Class</font></th>
<th align="center"><font face="Consolas">NetIDs</font></th>
<th align="center"><font face="Consolas">Blocks</font></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><font face="Consolas">A</font></td>
<td align="center"><font face="Consolas">10</font></td>
<td align="center"><font face="Consolas">1</font></td>
</tr>
<tr>
<td align="center"><font face="Consolas">B</font></td>
<td align="center"><font face="Consolas">172.16 to 172.31</font></td>
<td align="center"><font face="Consolas">16</font></td>
</tr>
<tr>
<td align="center"><font face="Consolas">C</font></td>
<td align="center"><font face="Consolas">192.168.0 to 192.168.255</font></td>
<td align="center"><font face="Consolas">256</font></td>
</tr>
</tbody>
</table>
</details>
<h4 id="3-ip">(3). <font face="Consolas">IP</font> 子网划分</h4>
<p>&emsp;有类 <font face="Consolas">IP</font> 地址通过网络号对地址空间进行了一定程度的划分。在此基础上，当一个组织获得一个网络号以后，对 <font face="Consolas">IP</font> 继续进行子网划分：<font face="Consolas">NetID-SubID-HostID</font>，然后将这些子网通过路由器互连，在数据传播的时候可以通过子网号隔离流量。</br>
&emsp;子网掩码 (<font face="Consolas">network mask</font>)：形如 <font face="Consolas">IP</font> 地址，是一个用点分十进制表示的 32 比特数；<font face="Consolas">NetID-SubID</font> 全取 1，<font face="Consolas">HostID</font> 全取 0。目的 <font face="Consolas">IP</font> 地址通过与子网掩码进行求与运算，可以提取出子网地址，从而得到子网的地址范围；在地址范围内去掉主机域全 0 和全 1 的 <font face="Consolas">IP</font> 地址，得到可分配地址范围。</p>
<h4 id="4-cidr">(4). <font face="Consolas">CIDR</font></h4>
<p>&emsp;<font face="Consolas">Internet</font> 采用的地址分配策略为 无类域间路由 (<font face="Consolas">Classless Interdomain Routing, CIDR</font>)，它一般化了子网寻址的概念，消除了传统的 <font face="Consolas">A、B、C</font> 类地址界限：将 <font face="Consolas">NetID-SubID</font> 统一为网络前缀；融合了子网地址与子网掩码，无类地址格式为 <font face="Consolas">a.b.c.d/<em>x</em></font>，<font face="Consolas"><em>x</em></font> 为网络前缀长度。</br>
&emsp;<font face="Consolas">CIDR</font> 提高了地址空间的利用率；伴随着路由聚合技术的出现，有效减少了转发表的表项数，提高了路由效率。</br>
&emsp;路由聚合通常作用于这样的情形：子网数为 2 的倍数，且它们的地址空间连续。当路由聚集的空间属于另外一个 <font face="Consolas">ISP</font> 的子网，当数据转发到这个子网时，就会出现路由黑洞现象。为了仍能够利用路由聚集及带来的便利，可以在两个 <font face="Consolas">ISP</font> 前的路由器的转发表中，利用最长前缀匹配原则，避免路由黑洞。</p>
<h4 id="5-dhcp">(5). <font face="Consolas">DHCP</font> 协议</h4>
<p>&emsp;一台主机获取 <font face="Consolas">IP</font> 通常有两种方法。可以通过静态配置，即通过网络管理员或操作系统静态设定 <font face="Consolas">IP</font> 地址。通过操作系统还可以设定默认网关（第一跳的接口的 IP）、本地（默认）<font face="Consolas">DNS</font> 服务器等。</br>
&emsp;动态地址配置通过动态主机配置协议 (<font face="Consolas">Dynamic Host Configuration Protocol, DHCP</font>) 实现。在一台主机接入网络时，可通过 <font face="Consolas">DHCP</font> 获得临时的 <font face="Consolas">IP</font> 地址、子网掩码、默认网关、本地 <font face="Consolas">DNS</font> 服务器地址，<font face="Consolas">DHCP</font> 广泛应用于主机动态地连接和离开某子网的情境中。</br>
&emsp;<font face="Consolas">DHCP</font> 是一个应用层的 <font face="Consolas">C-S</font> 协议，每一个子网具有一个 <font face="Consolas">DHCP</font> 服务器（如果没有，某台路由器作为中继代理，记录了用于该子网的 <font face="Consolas">DHCP</font> 服务器地址）。一台新接入的主机通过 4 个步骤获得 <font face="Consolas">IP</font> 地址：</p>
<ul>
<li>① <font face="Consolas">DHCP server discovery</font>：客户端在端口 67 通过 <font face="Consolas">UDP</font> 分组发送一个 <font face="Consolas">DHCP</font> 发现报文 (<font face="Consolas">DHCP discovery message</font>)，首先生成一个包含此报文的 <font face="Consolas">IP</font> 数据报，源 <font face="Consolas">IP</font> 填为“本主机” <font face="Consolas">0.0.0.0</font>，目的 <font face="Consolas">IP</font> 填为广播地址 <font face="Consolas">255.255.255.255</font>。在客户端将数据报传给链路层后，链路层将该帧广播到所有与该子网相邻的节点。</li>
<li>② <font face="Consolas">DHCP server offer</font>：<font face="Consolas">DHCP</font> 服务器收到一个发现报文时，仍通过广播地址 <font face="Consolas">255.255.255.255</font>，向所有结点广播一个 <font face="Consolas">DHCP</font> 发现报文 (<font face="Consolas">DHCP offer message</font>)。报文的内容包含报文的事务 ID、向客户端推荐的 <font face="Consolas">IP</font> 地址、网络掩码和 <font face="Consolas">IP</font> 地址的租用期。</li>
<li>③ <font face="Consolas">DHCP request</font>：客户端从一个或多个服务器中选择一个，相应一个 <font face="Consolas">DHCP</font> 请求报文 (<font face="Consolas">DHCP request message</font>)，回应配置参数。</li>
<li>④ <font face="Consolas">DHCP ACK</font>：服务器响应一个 <font face="Consolas">DHCP ACK</font> 报文，证实参数。</li>
</ul>
<div align=center><img src="https://github.com/HarvestSeek/ComputerNetwork/blob/gh-pages/img/4-NetworkLayer/4.2/DHCPprocess.png?raw=true" height=350></div>

<p></br>
&emsp;<font face="Consolas">DHCP</font> 的一个缺陷是，当一台主机在不同子网间移动，无法维持与远程应用的 <font face="Consolas">TCP</font> 连接。</p>
<h4 id="6-nat">(6). 网络地址转换 (<font face="Consolas">NAT</font>)</h4>
<p>&emsp;对 <font face="Consolas">IPv4</font> 来说，<font face="Consolas">IP</font> 地址已经枯竭；并且，对一个 <font face="Consolas">ISP</font> 来说，如果实现为其分配了一块地址空间，但随后需要更多的地址数，也会造成问题。以上的情形通过已被广泛应用的网络地址转换 (<font face="Consolas">Network Address Translation</font>) 被解决。</br>
&emsp;假设当前具有 <font face="Consolas">A</font> 类私有地址的三台家庭主机 <font face="Consolas">10.0.0.1</font>、<font face="Consolas">10.0.0.2</font>、<font face="Consolas">10.0.0.3</font>，它们共同接入路由器的 <font face="Consolas">10.0.0.4</font> 端，路由器另有一端具有公共 <font face="Consolas">IP</font> 地址 <font face="Consolas">138.76.29.7</font>。这些内部主机之间的通信使用这些私有地址不会出现问题，但如果要与外界通信，就要使用路由器维护的 <font face="Consolas">NAT</font> 转换表：每个外出的数据报的 <font face="Consolas">(src-IP, src-Port)</font> 被替换为 <font face="Consolas">(NAT-IP, new-Port)</font>，<font face="Consolas">NAT</font> 转换表维护这个映射，返回来的数据报再根据表项替换，就可以与内网相应主机通信。
<div align=center>
<table>
    <tr>
        <th colspan="2"><font face="Consolas">NAT Translation Table</td>  <br />
    </tr>
    <tr><td><font face="Consolas"><B>WAN side</B>
    </font></td> 
        <td><font face="Consolas"><B>LAN side</B></font></td> 
    </tr>
    <tr><td><font face="Consolas">138.76.29.7, 5001</font></td> 
        <td><font face="Consolas">10.0.0.1, 3345</font></td> 
    </tr><br />
</table>
</div></p>
<p>&emsp;<font face="Consolas">NAT</font> 技术的产生还带来了其他的好处：① 本地主机 <font face="Consolas">IP</font> 变更，无需通知外界；② 本地变更 <font face="Consolas">ISP</font> 时，无需修改内部网络 <font face="Consolas">IP</font>；③ 内部网络对外界不可见，外界无法直接寻址，提高了安全性。</br>
&emsp;相应地，<font face="Consolas">NAT</font> 还带来了以下争议：① 路由器只应该处理网络层功能；② 违背端-端通信原则，作为中间设备的路由器不应修改传输层的内容；③ 端-端应用的开发必须要考虑到 <font face="Consolas">NAT</font> 的存在，如 <font face="Consolas">P2P</font>；④ 地址短缺应该由 <font face="Consolas">IPv6</font> 完成。</br>
&emsp;按照上面的例子，以 <font face="Consolas">P2P</font> 应用为例，当其中一台家庭主机要作为对等方的服务器角色，客户端无法直接访问服务器，造成了 <font face="Consolas">NAT</font> 穿透问题。可有以下解决方案：</p>
<ul>
<li>① 在路由器中静态配置 <font face="Consolas">NAT</font>，将特定端口的请求转发给相应主机，<font face="Consolas"><em>e.g.</em></font> <font face="Consolas">(138.76.29.7, 2500)</font> 总是转发给 <font face="Consolas">(10.0.0.1, 2500)</font></li>
<li>② 利用 <font face="Consolas">UPnP</font> 互联网网关设备协议自动配置</li>
<li>③ 中继：双方与中继服务器连接</li>
</ul>
<h4 id="7-icmp">(7). <font face="Consolas">ICMP</font> 协议</h4>
<p>&emsp;互联网控制报文协议 <font face="Consolas">(Internet Control Message Protocol, ICMP)</font> 支持主机或路由器进行差错报告或网络探询。</p>
<ul>
<li>差错报告报文<ul>
<li>目的不可达：数据报到达目的地后，无法交付数据，则丢弃报文，并发送差错报告</li>
<li>源抑制：缓存已满导致数据报被丢弃，在实际的网络的拥塞控制没有采用此方法</li>
<li>超期：<font face="Consolas">TTL</font> 超期使得数据报被丢弃</li>
<li>参数问题：转发数据报时发现头部某些字段参数错误，丢弃报文</li>
<li>重定向：当某数据报到达一个路由器，在路由器看来不该由它转发，则像源主机发送重定向报文</li>
</ul>
</li>
<li>
<p>网络探询</p>
<ul>
<li>回声请求与应答报文：通过接收相应探测网络是否通达，如 <font face="Consolas">ping</font> 工具</li>
<li>时间戳请求与应答报文</li>
</ul>
</li>
<li>
<p>不发送 <font face="Consolas">ICMP</font> 差错报告报文的特殊情况：</p>
<ul>
<li><font face="Consolas">ICMP</font> 报文出差错</li>
<li>除了第一个 <font face="Consolas">IP</font> 数据报分片的所有后续分片</li>
<li>所有的多播 <font face="Consolas">IP</font> 数据报</li>
<li>具有特殊地址的 <font face="Consolas">IP</font> 数据报 (如 <font face="Consolas">127.0.0.0</font> 或 <font face="Consolas">0.0.0.0</font>)</li>
</ul>
</li>
</ul>
<p>&emsp;<font face="Consolas">ICMP</font> 是一个介于网络层与传输层之间的网络层协议。<font face="Consolas">ICMP</font> 报文被封装到 <font face="Consolas">IP</font> 数据报中传输，其结构为 <font face="Consolas">ICMP header(8 byte)</font> <font face="Consolas">+</font> 出问题的 <font face="Consolas">IP</font> 数据报头部 <font face="Consolas">+</font> <font face="Consolas">IP</font> 数据前 8 字节。最后一部分对应完成的 <font face="Consolas">UDP</font> 头部或 <font face="Consolas">TCP</font> 头部的端口号字段之前。</br>
&emsp;应用 <font face="Consolas">Trace Route</font> 举例：源主机发送一系列 <font face="Consolas">UDP</font> 数据报，第 <font face="Consolas"><em>i</em></font> 组数据报 <font face="Consolas">TTL</font> <font face="Consolas">=</font> <font face="Consolas"><em>i</em></font>，且目的端口号设为不可能使用的一个端口号。路由器会返回 <font face="Consolas">ICMP</font> 报文 (type = 11, code = 0)，携带路由器名称和 <font face="Consolas">IP</font> 地址信息；当目的主机返回 <font face="Consolas">ICMP</font> 报文“目的端口不可达” (type = 3, code = 3)，源主机停止发送。</p>
<h3 id="4-ipv6">4. <font face="Consolas">IPv6</font> 简介</h3>
<h4 id="1-ipv6">(1). <font face="Consolas">IPv6</font> 数据报格式</h4>
<div align=center><img src="https://github.com/HarvestSeek/ComputerNetwork/blob/gh-pages/img/4-NetworkLayer/4.2/IPv6.png?raw=true" width=350></div>

<p></br></p>
<p><font face="Consolas">IPv6</font> 最初动机是 <font face="Consolas">IPv4</font> 地址空间的耗尽；它还改进了头部的格式，支持快速处理、<font face="Consolas">QoS</font>。</br>
① 优先级 (<font face="Consolas">8 bit</font>)</br>
&emsp;功能特性对应 <font face="Consolas">IPv4</font> 的 <font face="Consolas">ToS</font>。</p>
<p>② 流标签 (<font face="Consolas">20 bit</font>)</br>
&emsp;用于标识源主机到目的主机发送的数据报，以给定某些数据报优先权。流的定义尚在讨论中。</p>
<p>③ 有效载荷长度 (<font face="Consolas">16 bit</font>)</br>
&emsp;给出 <font face="Consolas">IPv6</font> 的 40 字节首部之后的数据长度，包括扩展首部 + 数据。</p>
<p>④ 下一个首部 (<font face="Consolas">8 bit</font>)</br>
&emsp;如果数据部分有扩展首部的话，该部分指向下一个扩展首部，下一个扩展首部也有相同的字段。最后一个首部指向传输层报文的头部。</p>
<p>⑤ 跳步限制 (<font face="Consolas">8 bit</font>)</br>
&emsp;功能特性同 <font face="Consolas">IPv4</font> 的 <font face="Consolas">TTL</font>：每经过一跳值减一，减为零后丢弃并发送 <font face="Consolas">ICMP</font> 报文。</p>
<p>⑥ 源地址、目的地址 (<font face="Consolas">128 bit</font>)</br>
&emsp;大大扩展了地址空间。</p>
<p>还有另外一部分相对于 <font face="Consolas">IPv4</font> 的改变：</p>
<ul>
<li>彻底移除 <font face="Consolas">checksum</font>，减少每跳处理时间</li>
<li>选项字段移除，通过下一个首部字段允许多个选项首部</li>
<li>采用新版的 <font face="Consolas">ICMPv6</font>，增加报文类型、扩展部分功能</li>
</ul>
<h4 id="2-ipv6">(2). <font face="Consolas">IPv6</font> 地址表示</h4>
<p>&emsp;地址空间扩展至 128 位，<font face="Consolas">IPv6</font> 采用形如 <font face="Consolas">1080:0:FF:0:8:800:200C:417A</font> 的一般表示形式，8 个十六进制 16 <font face="Consolas">bit</font> 数用冒号分隔。当出现多个连续的零时，可以使用压缩形式，用两个冒号代替连续的 0，如 <font face="Consolas">FF01::43</font>，但只能替换一处。</br>
&emsp;为与 <font face="Consolas">IPv4</font> 兼容，<font face="Consolas">IPv6</font> 划定了一块空间 <font face="Consolas">0:0:0:0:0:FFFF:a.b.c.d</font>，表示 <font face="Consolas">IPv4</font> 的嵌入形式。</br>
&emsp;<font face="Consolas">IPv6</font> 舍弃了掩码的概念，采用 <font face="Consolas">CIDR</font> 的形式，例如 <font face="Consolas">2002:43C:476B::/48</font>。</br>
&emsp;在表示 <font face="Consolas">URL</font> 的时候，<font face="Consolas">IPv6</font> 可能造成歧义，因此规定地址部分用中括号“<font face="Consolas">[]</font>”括起来，例如 <font face="Consolas">http://[3FFE::1:800:200C:417A]:8080</font>。</p>
<h4 id="3-ipv4-ipv6">(3). <font face="Consolas">IPv4 → IPv6</font></h4>
<p>&emsp;<font face="Consolas">IPv4</font> 的网络设备不可能同时都被更新为 <font face="Consolas">IPv6</font>。过渡的方法是，<font face="Consolas">IPv4</font> 路由器支持双协议，在传输 <font face="Consolas">IPv6</font> 数据报时可以被看做逻辑上的一个隧道：把 <font face="Consolas">IPv6</font> 数据报作为有效载荷封装进 <font face="Consolas">IPv4</font> 数据报中。</p>
<p></font></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../4.1/" title="1.Network Service Model" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                1.Network Service Model
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../js/katex.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>